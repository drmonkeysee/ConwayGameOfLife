<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Conway's Game of Life</title>
    <style type="text/css">
        body {
            font-family: Helvetica, Arial, Sans-Serif
        }
        #boardControls label, #boardControls output {
            vertical-align: super;
        }
        #boardControls label {
            font-weight: bold;
        }
        table {
            cursor: pointer;
        }
        td {
            border: 1px solid gray;
        }
        td.live {
            background-color: black;
        }
    </style>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
</head>
<body>
    <h1>Conway's Game of Life</h1>
    <div id="boardControls">
        <label for="cellSize">Cell Size:</label>
        <input id="cellSize" type="range" min="5" max="20" value="15" />
        <output for="cellSize" id="cellSizeOutput">15</output>
        <label for="rowCount">Row Count</label>
        <input id="rowCount" type="range" min="10" max="100" value="30" />
        <output for="rowCount" id="rowCountOutput">30</output>
        <label for="columnCount">Column Count</label>
        <input id="columnCount" type="range" min="10" max="100" value="60" />
        <output for="columnCount" id="columnCountOutput">60</output>
    </div>
    <div id="runControls">
        <button id="runButton">Start</button>
    </div>
    <div id="wrapper">
        <table id="board">
        </table>
    </div>
    <script>
        // utility functions to make sure dead and live cells are painted properly
        // use these functions to set and clear cells when calculating the next frame
        var gol = {
            utility: {
                markCell: function (cell) {
                    $(cell).addClass('live').data('alive', true);
                },
                clearCell: function (cell) {
                    $(cell).removeClass('live').removeData('alive');
                },
                toggleCell: function (cell) {
                    if ($(cell).data('alive')) {
                        gol.utility.clearCell(cell);
                    }
                    else {
                        gol.utility.markCell(cell);
                    }
                }
            }
        };
        
        // set up the board
        $(function () {
            var $board = $('#board');
            var mouseDown = false;
            $board.on('mousedown', function (ev) {  mouseDown = true; ev.preventDefault(); });
            $(document).on('mouseup', function () { mouseDown = false; });
            
            function drawBoard() {
                $board.empty();
                var rowCount = $('#rowCount').val();
                var columnCount = $('#columnCount').val();
                var cellSize = $('#cellSize').val();
                for (var i = 0; i < rowCount; ++i) {
                    var $row = $('<tr id="row' + i + '">').appendTo($board);
                    for (var j = 0; j < columnCount; ++j) {
                        $cell = $('<td id="' + j + 'x' + i + '" data-x="' + j + '" data-y="' + i + '"></td>').appendTo($row);
                        $cell.height(cellSize).width(cellSize).on('mouseenter', function () {
                            if (mouseDown) {
                                gol.utility.toggleCell(this);
                            }
                        }).on('mousedown', function (ev) {
                            mouseDown = true;
                            ev.preventDefault();
                            gol.utility.toggleCell(this);
                        });
                    }
                }
            }
            
            $('#boardControls input').on('input', function () {
                var id = $(this).attr('id');
                $('#' + id + 'Output').text($(this).val());
            }).on('change', function () {
                drawBoard();
            }).trigger('input');
            
            drawBoard();
        });
        
        // INSERT YOUR GAME LOOP HERE AND WIRE UP TO THE "startButton" BUTTON
    </script>
</body>
</html>